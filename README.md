# Tales Of Shadowland MMO Server 5

This is a multiplayer server based on .NET 8, which automatically generates RPC communication packages and .cpp files for use with Unreal Engine, supporting both C++ and Blueprints. Follow the steps below to set up and start the project.

## Prerequisites

- **Windows 10 or higher**
- **Unreal Engine 5.0 or higher**
- **.NET SDK 8.0 or higher**
- **Visual Studio 2022**

Before setting up the project, make sure to install the following NuGet packages:

1. **DotNetEnv**  
   [Download DotNetEnv](https://www.nuget.org/packages/DotNetEnv)
2. **Microsoft.VisualStudio.Interop**  
   [Download Microsoft.VisualStudio.Interop](https://www.nuget.org/packages/Microsoft.VisualStudio.Interop)
3. **System.Reactive**  
   [Download System.Reactive](https://www.nuget.org/packages/System.Reactive)

### Enable unsafe code in Visual Studio

1. Right-click the project > Properties.
2. Go to the Build tab.
3. Check the **Allow unsafe code** option.

## Step 1: Create the Plugin Symbolic Link

Before starting, create a symbolic link pointing to the Unreal plugin directory generated by the server:

Open PowerShell as Administrator and run:
.\LinkPlugin.ps1 -ServerDir "G:\Server" -ClientUnrealProjectDir "G:\NetworkSample"
> **If script execution is restricted, temporarily allow it with:**
>
> ```powershell
> Set-ExecutionPolicy RemoteSigned -Scope Process
> ```

## Step 2: Build the Plugin in Unreal

1. Right-click the `.uproject` file of your Unreal project and select **"Generate Visual Studio project files"**.
2. Open the Unreal project in Visual Studio.
3. When opening, a message will appear asking to build the plugin. Accept to compile.
4. If any error occurs, build manually in Visual Studio by opening the `.sln` file and compiling the project.

## Code Generation

When running the server in debug mode, the system automatically generates the necessary package files and support components for server operation and Unreal integration.

- The Unreal client's Intermediate directory is cleaned.
- The client's Visual Studio project is regenerated.
- Unreal Engine generates the required headers.
- If Visual Studio or Unreal Editor are open, you may need to recompile or refresh the project.

## Development Status

The project is actively under development with multiple core systems being implemented simultaneously:

### 🛠️ **Currently In Progress**
- **RPC System** - Automatic remote procedure call generation
- **C# Packet Creation** - Dynamic packet creation and serialization
- **Unreal Plugin** - Native Unreal Engine integration
- **Base Replication** - Entity synchronization system
- **Network Event System** - Event-driven network communication
- **UDP Server Enhancement** - Advanced UDP features and reliability

### ✅ **Completed**
- **Testing Framework** - Custom testing system with descriptive structure
- **Base36 Utilities** - Integer encoding/decoding with full test coverage
- **CRC32C Implementation** - Hardware-accelerated checksum computation
- **ByteBuffer System** - High-performance binary serialization
- **Buffer Pooling** - Efficient memory management system

## UDP Server Architecture

The UDP server is designed with high performance and reliability in mind:

### Core Components
- **UDPServer**: Main server class handling connections and message routing
- **UDPSocket**: Low-level UDP socket wrapper for network operations
- **ByteBuffer**: High-performance binary serialization with read/write operations
- **ByteBufferPool**: Object pooling system for efficient memory management
- **ByteBufferLinked**: Linked buffer system for large data streaming

### Network Features
- **Connection Management**: Basic UDP client connection handling ✅
- **Buffer Management**: Efficient memory pooling and reuse ✅
- **Packet Serialization**: Binary packet reading/writing ✅
- **Queue System**: Packet grouping and batching 🛠️
- **Reliable Messaging**: Guaranteed delivery system ⏳
- **Packet Validation**: Integrity checking and validation ⏳
- **Encryption**: Secure packet transmission ⏳
- **Heartbeat System**: Client connectivity monitoring ⏳

## Features

- **Automatic RPC generation** (in development)
- **Unreal Engine plugin integration** (in development)
- **UDP server with advanced features** (in development)
- **C# packet creation system** (in development)
- **Entity replication system** (in development)
- **Network event system** (in development)
- **WebSocket support** (planned)
- **Automated testing framework**
- **High-performance binary communication**
- **Buffer pooling and management**
- **XOR encoding and ECC/AES encryption** (planned)
- **Base36 encoding/decoding utilities**
- **CRC32C checksum computation**

## Checklist

### Core Utilities
| Feature                             | Status            | Notes                                                       |
|------------------------------------|-------------------|-------------------------------------------------------------|
| Base36 Encoding/Decoding           | ✅ Implemented     | Base36 utility for encoding/decoding integers with tests.  |
| CRC32C Checksum                    | ✅ Implemented     | High-performance CRC32C computation with hardware acceleration. |
| Testing Framework                  | ✅ Implemented     | Custom testing framework with descriptive test structure.   |

### Network & Communication
| Feature                             | Status            | Notes                                                       |
|------------------------------------|-------------------|-------------------------------------------------------------|
| RPC                                | 🛠 In Progress     | RPC system in development.                                  |
| C# Packet Creation                 | 🛠 In Progress     | C# packet creation system in development.                   |
| Unreal Plugin                      | 🛠 In Progress     | Unreal Engine plugin development in progress.               |
| WebSocket                          | ⏳ Not Implemented | WebSocket support not implemented yet.                      |
| XOR Encoding                       | ⏳ Not Implemented | XOR encoding system not implemented yet.                    |
| ECC and AES256 Encryption          | ⏳ Not Implemented | ECC/AES256 encryption not implemented yet.                  |

#### UDP Server Implementation
| Feature                             | Status            | Notes                                                       |
|------------------------------------|-------------------|-------------------------------------------------------------|
| Basic Connection                   | ✅ Implemented     | Basic UDP connection implemented and tested.               |
| ByteBuffer (Read/Write)            | ✅ Implemented     | Binary buffer for packet reading/writing operations.       |
| ByteBuffer Pool                    | ✅ Implemented     | Object pooling for efficient buffer management.            |
| QueueBuffer                        | 🛠 In Progress     | Packet grouping class exists and tested, full implementation pending. |
| Reliable Messaging                 | ⏳ Planned         | Reliable UDP messaging system to be implemented.           |
| Packet Validation                  | ⏳ Planned         | Packet integrity and validation system to be implemented.  |
| Packet Encryption                  | ⏳ Planned         | Packet encryption system to be implemented.                |
| Client Heartbeat                   | ⏳ Planned         | Client validation heartbeat system to be implemented.      |

### Game Systems
| Feature                             | Status            | Notes                                                       |
|------------------------------------|-------------------|-------------------------------------------------------------|
| Base Replication                   | 🛠 In Progress     | Base element replication system in development.             |
| Network Event System               | 🛠 In Progress     | Network event system in development.                        |
| JWT Authentication                 | ⏳ Not Implemented | JWT authentication not implemented yet.                     |
| Reactive System                    | ⏳ Not Implemented | Reactive system not implemented yet.                        |
| Reactive Request Handlers          | ⏳ Not Implemented | Reactive request handlers not implemented yet.              |
